<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: update-view.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: update-view.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from 'react';
import axios from 'axios';
import PropTypes from 'prop-types';
import Form from 'react-bootstrap/Form'
import Button from 'react-bootstrap/Button'
import './update-view.scss';

/**
 * @requires react
 * @requires axios
 * @requires PropTypes
 * @requires react-bootstrap
 */

export function UpdateView(props) {
	const { userData } = props

	const [password, setPassword] = useState('');
	const [email, setEmail] = useState('');
	const [birthday, setBirthday] = useState('');

	const [passwordCheck, setPasswordCheck] = useState('');

	const handleUpdate = (e) => {
		e.preventDefault();
		if (!password) {
			alert("password necessary");
		} if (password !== passwordCheck) {
			alert("the passwords do not match")
		} else {
			patchUser(localStorage.getItem('token'));
		}
	}

	const ifUpdated = (newData, oldData) => {
		if (!newData) {
			return oldData;
		} return newData;
	}

  /**
   * updates relevant user from /users/:username
   * @function patchUser
   * @param {*} token 
   * @param {string} username - from state
   */
	const patchUser = (token) => {
		axios.patch(`https://radiant-flix.herokuapp.com/users/${userData.Username}`, {
			Username: userData.Username,
			Password: password,
			Email: ifUpdated(email, userData.Email),
			Birthday: ifUpdated(birthday, userData.Birthday)
		}, {
			headers: { Authorization: `Bearer ${token}` }
		})
			.then(response => {
				const newUserData = response.data;
				console.log(newUserData);
				window.open(`/client/users/${userData.Username}`, '_self'); //'_self' for: current tab
			})
			.catch(function (err) {
				console.log(err);
			});
	}
	return (
		&lt;Form className="profile-form-view update-card">
			&lt;Form.Group controlId="formBasicEmail">
				&lt;Form.Label>Change e-mail:&lt;/Form.Label>
				&lt;Form.Control size="sm" type="email" aria-label="Email"
					placeholder="email@email.com"
					value={email}
					onChange={e => setEmail(e.target.value)} />
				&lt;Form.Text className="text-muted">
					optional
    &lt;/Form.Text>
			&lt;/Form.Group>
			&lt;Form.Group controlId="formBasicDob">
				&lt;Form.Label>Change birthday:&lt;/Form.Label>
				&lt;Form.Control size="sm" type="date" aria-label="Birthday"
					value={birthday}
					onChange={e => setBirthday(e.target.value)} />
				&lt;Form.Text className="text-muted">
					optional
    &lt;/Form.Text>
			&lt;/Form.Group>
			&lt;Form.Group controlId="formBasicPassword">
				&lt;Form.Label>New (or old) password:&lt;/Form.Label>
				&lt;Form.Control size="sm" type="password" aria-label="Password"
					placeholder="at least 6 characters"
					value={password}
					onChange={e => setPassword(e.target.value)}
					required />
			&lt;/Form.Group>
			&lt;Form.Group controlId="formBasicPassword">
				&lt;Form.Label>Confirm password:&lt;/Form.Label>
				&lt;Form.Control size="sm" type="password" aria-label="Password"
					placeholder="repeat"
					value={passwordCheck}
					onChange={e => setPasswordCheck(e.target.value)}
					required />
			&lt;/Form.Group>
			&lt;Button variant="primary" type="submit" onClick={handleUpdate}>Send&lt;/Button>
		&lt;/Form>

	);
}

UpdateView.propTypes = {
	userData: PropTypes.shape({
		Username: PropTypes.string.isRequired,
		Email: PropTypes.string,
		Birthday: PropTypes.string
	}).isRequired
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#patchUser">patchUser</a></li><li><a href="global.html#UpdateView">UpdateView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Sun Aug 16 2020 22:52:40 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
